
### 什么是粘包和拆包
根据网络OSI七层或者业界四层模型下，传输层之下是通过数据包来传送的，通常客户端发送一个包，服务端
接收一个包是不会存在粘包和拆包的情况的，但是如果客户端发送的包频率过快或者包本身过大，就会造成
拆包和粘包。那么什么是粘包和拆包？
粘包是指：客户端发送两条+消息到服务端，但是服务端只收到了一个数据包。服务端并不知道哪里是边界
区分两条消息，这个时候便是发生了粘包。
拆包是指：客户端发送了一条很大的消息到服务端，但是服务端收到的数据包里只包含了这条信息的一部分
这个时候就发生了拆包。
#### 为什么是TCP而不是UDP
udp有边界，所以不会存在拆包粘包问题。
参考tcp与udp之间的区别：http://www.diffen.com/difference/TCP_vs_UDP



### 为什么会存在粘包和拆包
1. 客户端写入的数据大于套接字缓冲区的大小，服务端接收到的数据包会发生拆包的问题
2. 客户端写入的数据小于套接字缓冲区的大小，服务端接收到的数据包会包含多次客户端写入的数据
3. 当TCP报文长度 - TCP头部长度 > 最大报文长度时候 会发生拆包
4. 接收方法不及时读取缓冲区的数据会发生粘包


#### 粘包和拆包的存在会造成什么影响
如果存在粘包拆包问题没有解决就会造成功能异常
比如多次请求只存在一两次有效的情况。


### 怎么解决粘包和拆包
netty提供了多种编解码器用于处理半包。
比如：LineBaseFrameDecoder ，他的工作原理是依次遍历ByteBuf中的可读字节，判断看是否有
`\n`,`\n\r`如果有就以此为结束位置。
StringDecoder 就是将接收到的对象转换成字符串。





